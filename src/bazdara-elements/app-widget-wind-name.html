<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/i18n-msg/i18n-msg.html">

<dom-module id="app-widget-wind-name">

  <template>

  <style include="shared-styles">
     :host {
      display: block;
      box-sizing: border-box;
    }

  </style>


<i18n-msg msgid$="{{_windNames}}">{{_windNames}}</i18n-msg>

<div class="text-muted small">({{direction}}Â°&nbsp;<i18n-msg msgid$="{{_windCompass}}">{{_windCompass}}</i18n-msg>)</div>

  </template>

</dom-module>

<script>
  Polymer({

    is: 'app-widget-wind-name',

    properties: {

      /**
       * `direction` the wind direction in degrees.
       */
      direction: {
        type: Number,
        observer: '_directionChange'
      },
      name: {
        type: Number,
        value: 0.0,
        observer: '_nameChange'
      },
      _windNames: {
        type: String,
        reflectToAttribute: true
      },
      _windCompass: {
        type: String,
        reflectToAttribute: true
      }
    },

    behaviors: [i18nMsgBehavior],

    _directions: [{
      direction: 'N',
      from: 348.75,
      to: 11.25
    }, {
      direction: 'NNE',
      from: 11.25,
      to: 33.75
    }, {
      direction: 'NE',
      from: 33.75,
      to: 56.25
    }, {
      direction: 'ENE',
      from: 56.25,
      to: 78.75
    }, {
      direction: 'E',
      from: 78.75,
      to: 101.25
    }, {
      direction: 'ESE',
      from: 101.25,
      to: 123.75
    }, {
      direction: 'SE',
      from: 123.75,
      to: 146.25
    }, {
      direction: 'SSE',
      from: 146.25,
      to: 168.75
    }, {
      direction: 'S',
      from: 168.75,
      to: 191.25
    }, {
      direction: 'SSW',
      from: 191.25,
      to: 213.75
    }, {
      direction: 'SW',
      from: 213.75,
      to: 236.25
    }, {
      direction: 'WSW',
      from: 236.25,
      to: 258.75
    }, {
      direction: 'W',
      from: 258.75,
      to: 281.25
    }, {
      direction: 'WNW',
      from: 281.25,
      to: 303.75
    }, {
      direction: 'NW',
      from: 303.75,
      to: 326.25
    }, {
      direction: 'NNW',
      from: 326.25,
      to: 348.75
    }],


    _names: [{
      name: 'Tramontana',
      from: 340.1,
      to: 10
    }, {
      name: 'Burin',
      from: 10.1,
      to: 30
    }, {
      name: 'Burja',
      from: 30.1,
      to: 100
    }, {
      name: 'Levant',
      from: 100.1,
      to: 120
    }, {
      name: 'Jugo',
      from: 120.1,
      to: 160
    }, {
      name: 'Ostro',
      from: 160.1,
      to: 200
    }, {
      name: 'Lebic',
      from: 200.1,
      to: 240
    }, {
      name: 'Garbin',
      from: 240.1,
      to: 260
    }, {
      name: 'Ponent',
      from: 260.1,
      to: 290
    }, {
      name: 'Maestral',
      from: 290.1,
      to: 340
    }],

    _directionChange: function(e) {

      //  canvas.update({ value: this.live.currentWindSpeed });

      for (var i = 1; i < this._directions.length; i++) {
        if (e >= this._directions[i].from && e < this._directions[i].to) {
          this._windCompass = this._directions[i].direction;
          return;
        }
      }
      this._windCompass = this._directions[0].direction;

    },

    _nameChange: function(e) {

      for (var i = 1; i < this._names.length; i++) {
        if (e >= this._names[i].from && e < this._names[i].to) {
          this._windNames = this._names[i].name;
          return;
        }
      }
      this._windNames = this._names[0].name;


    },

  });
</script>
