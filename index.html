<!doctype html>
<html lang="sl">

<head>
  <base href="/">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="keywords" content="Vreme,Temperatura,Veter,Val,Plimovanje,Piran,Obala,Slovenija,Morje,Kartografija,Boja,Vida,Plima,Oseka,Napoved">
  <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/images/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
  <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="theme-color" content="#1e88e5">
  <meta name="msapplication-navbutton-color" content="#FFFFFF">
  <meta name="msapplication-starturl" content="/trenutno?utm_source=App&amp;utm_medium=WebApp&amp;utm_campaign=App" />
  <meta name="apple-mobile-web-app-status-bar-style" content="#1e88e5">
  <link rel="manifest" href="/manifest.json">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Bazdara">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Bazdara">
  <meta name="google-site-verification" content="twWiK2UYGW1eR4hUZ1pECBtAI6J9oCtXPiTbrJgR08A" />
  <meta name="author" content="Luka Karinja">
  <link rel="preconnect" href="https://x.bazdara.com">
  <link rel="dns-prefetch" href="https://www.google-analytics.com">
  <link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">

  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "name": "Bazdara",
      "alternateName": "Bazdara Vreme Piran, Podatki iz oceanografske boje Vide, Plimovanje morja, Kartografija morja, Nautiƒçne karte",
      "url": "https://www.bazdara.com"
    }, {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://www.bazdara.com",
      "logo": "https://www.bazdara.com/images/icons/android-icon-192x192.png"
    }
  </script>

  <style>
    html {
      overflow-y: scroll;
    }

    body {
      margin: 0;
    }
  </style>

  <link rel="import" href="/src/bazdara-app/bazdara-app.html" async>
</head>

<body>
  <bazdara-cache></bazdara-cache>
  <bazdara-app></bazdara-app>

  <script>
    // Load webcomponentsjs polyfill if browser does not support native Web Components
    (function() {
      'use strict';
      var onload = function() {
        // For native Imports, manually fire WebComponentsReady so user code
        // can use the same code path for native and polyfill'd imports.
        if (!window.HTMLImports) {
          document.dispatchEvent(
            new CustomEvent('WebComponentsReady', {
              bubbles: true
            })
          );
        }
      };
      var webComponentsSupported = (
        'registerElement' in document && 'import' in document.createElement('link') && 'content' in document.createElement('template')
      );
      if (!webComponentsSupported) {
        var script = document.createElement('script');
        script.async = true;
        script.src = '/bower_components/webcomponentsjs/webcomponents-lite.min.js';
        script.onload = onload;
        document.head.appendChild(script);
      } else {
        onload();
      }
    })();

    //  if ('serviceWorker' in navigator) {
    //    navigator.serviceWorker.register('/service-worker.js', {
    //      scope: '/'
    //    }).then(function(registration) {
    //
    //    }).catch(function(error) {
    //      // error
    //    });
    //  };

    function getAndroidVersion(ua) {
      ua = (ua || navigator.userAgent).toLowerCase();
      var match = ua.match(/android\s([0-9\.]*)/);
      return match ? match[1] : false;
    };

    // getAndroidVersion(); //"4.2.1"
    // parseInt(getAndroidVersion(), 10); //4
    // parseFloat(getAndroidVersion()); //4.2

    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-68400284-1', 'auto');


    // Web App Manifest Polyfill for iOS
    (function(){

      var xhr = new XMLHttpRequest()

      xhr.onload = function() {
        var manifestJson = JSON.parse(xhr.responseText);
        addTags(manifestJson);
      };

      var manifestEl = document.head.querySelector("link[rel=manifest]");
      if(!!manifestEl === true) {

        xhr.open("GET", manifestEl.href);
        xhr.send();
      }

      var addTags = function(manifest) {

        var webAppCapable = document.createElement("meta");
        var webAppTitle = document.createElement("meta");
        var webAppStartUrl = document.createElement("meta");
        webAppCapable.setAttribute("name", "apple-mobile-web-app-capable");
        var isWebAppCapable = (manifest['display'] == 'standalone' || manifest['display'] == 'fullscreen') ? 'yes' : 'no';
        webAppCapable.setAttribute("content", isWebAppCapable);
        webAppTitle.setAttribute("name", "apple-mobile-web-app-title");
        webAppTitle.setAttribute("content", manifest['short_name'] || manifest['name'] || "");

        webAppStartUrl.setAttribute("name", "msapplication-starturl");
        webAppStartUrl.setAttribute("content", manifest['start_url'] || location.href);

        // Parse the icons.

        var icons = manifest["icons"] || [];

        for(var iconIdx = 0; iconIdx < icons.length; iconIdx++) {
          var iconElement = document.createElement("link");
          var icon = icons[iconIdx];

          iconElement.setAttribute("rel", "apple-touch-icon");
          iconElement.setAttribute("href", icon.src);
          iconElement.setAttribute("sizes", icon.sizes);

          document.head.appendChild(iconElement);
        }
        document.head.appendChild(webAppCapable);
        document.head.appendChild(webAppTitle);
        document.head.appendChild(webAppStartUrl);
      }
    })();



    // This all simulates the start URL.
    (function() {
      var startUrlEl = document.querySelector("meta[name=msapplication-starturl]");
      if(!!startUrlEl === true && navigator.standalone === true) {
        var lastUrl = localStorage["navigate"];
        history.pushState({launched: (!!lastUrl == false && history.length === 1)}, undefined, lastUrl || startUrlEl.content);
        localStorage.removeItem("navigate");

        // Intercept all anchor clicks and keep fullscreen if in origin
        document.addEventListener("click", function(e) {
          var target = e.target;
          if(target.tagName === 'A') {

            var href = target.getAttribute("href");
            var linkedUrl = new URL(target.href);
            if(linkedUrl.origin === location.origin) {
              e.preventDefault();
              location.href = href;
            }
            else {
              // When we are navigating away store the state so we can resume.
              localStorage["navigate"] = location.href;
            }
          }
        });
      }
    })();

  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</body>

</html>
